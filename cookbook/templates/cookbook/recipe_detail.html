{% extends 'base.html' %} {% block content %}
{% load static %}

<div class="container">
    <div class="row g-0 align-items-center bg-light rounded-top">
        <div class="col p-3 pt-5 p-md-4 pt-md-5">
            <h1>{{ recipe.title }}</h1>
            <div class="pt-3">
                <hr>
                <h6>Average Rating: {{ recipe.average_rating }}
                    <span class="fa fa-star {% if average_rating > 0 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 1 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 2 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 3 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 4 %} checked {% endif %}"></span>
                </h6>
            </div>
        </div>
    </div>
    <div class="row g-0 bg-light">
        <div class="col-8">
            <div class="m-3">
                <img src="{% static 'images/mini-muffin-pizzas.jpg' %}" class="rounded scale" alt="placeholder">
            </div>
        </div>
        <div class="col-4">
            <div class="mt-3">
                <div class="row">
                    <h5>You will Use:</h5>
                    <div class="col-3">
                        {% if recipe.baking %}
                        <img src="{% static 'images/mini-muffin-pizzas.jpg' %}" class="scale" alt="placeholder">
                        {% endif %}
                    </div>
                    <div class="col-3">
                        {% if recipe.baking %}
                        <img src="{% static 'images/mini-muffin-pizzas.jpg' %}" class="scale" alt="placeholder">
                        {% endif %}
                    </div>
                    <div class="col-3">
                        {% if recipe.baking %}
                        <img src="{% static 'images/mini-muffin-pizzas.jpg' %}" class="scale" alt="placeholder">
                        {% endif %}
                    </div>
                </div>
                <div>
                    <div class="py-3 mt-3">
                        <h5>You will Need:</h5>
                        <p>{{ recipe.ingredients | safe }}</p>   
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="bg-light px-4 py-3 rounded-bottom"> 
            <h5>Instructions:</h5>
            <p>{{ recipe.instructions | safe }}</p>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row g-0 bg-light rounded my-3">
        <div class="col p-4">
            <h5>Rate this Recipe</h5>
            {% if user_rating %}
            <p>Your Rating:
                <span class="fa fa-star {% if user_rating.rating > 0 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if user_rating.rating > 1 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if user_rating.rating > 2 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if user_rating.rating > 3 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if user_rating.rating > 4 %} checked {% endif %}"></span>
            </p>

            <form class="hidden" id="rating-form" method="POST">

                {% csrf_token %}
                <p>How many stars would you give {{ recipe.title }}?</p>
                <div id="rating-radio-buttons">
                    <input type="radio" id="1-star" name="rating" value="1">
                    <label for="1-star">
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="2-stars" name="rating" value="2">
                    <label for="2-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="3-stars" name="rating" value="3">
                    <label for="3-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="4-stars" name="rating" value="4">
                    <label for="4-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="5-stars" name="rating" value="5" checked>
                    <label for="5-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br><br>
                </div>
                <button type="submit" class="btn btn-edit">Submit Rating</button>
            </form>

            <button id="edit-rating-btn" class="btn btn-edit" onclick="show_rating_form()">Edit Rating</button>
            {% else %}

            <p>You haven't submitted a rating for this recipe yet.</p>
            <form id="rating-form" method="POST">

                {% csrf_token %}
                <p>How many stars would you like to give {{ recipe.title }}?</p>
                <div id="rating-radio-buttons">
                    <input type="radio" id="1-star" name="rating" value="1" checked>
                    <label for="1-star">
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="2-stars" name="rating" value="2">
                    <label for="2-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="3-stars" name="rating" value="3">
                    <label for="3-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="4-stars" name="rating" value="4">
                    <label for="4-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br>

                    <input type="radio" id="5-stars" name="rating" value="5">
                    <label for="5-stars">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span></label><br><br>
                </div>
                <button type="submit" class="btn btn-edit">Submit Rating</button>
            </form>
            {% endif %}
        </div>
        <div class="col p-4">
            <h5>Add a comment</h5>
        </div>
        <div class="col p-4">
            <div>
                <button>Add to Favourites</button>
            </div>
            <div>
                <button>Want to Try?</button>
            </div>
            <div>
                <button>Don't Like?</button>
            </div>
        </div>
    </div>
</div>

{% endblock content %}