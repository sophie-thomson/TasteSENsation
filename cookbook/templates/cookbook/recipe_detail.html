{% extends 'base.html' %} {% block content %}
{% load static %}

<div class="masthead">
    <div class="container">
        <div class="row g-0">
            <div class="col-md-6 masthead-text">
                <h1 class="recipe-title">{{ recipe.title }}</h1>
                <p class="recipe-subtitle">{{ recipe.source_site }} Recipe   |   {{ recipe.created_on }}</p>
                <hr>
                <p>Average Rating: {{ recipe.average_rating }}
                    <span class="fa fa-star {% if average_rating > 0 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 1 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 2 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 3 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if average_rating > 4 %} checked {% endif %}"></span>
                </p>
            </div>
            <div class="d-none d-md-block col-md-6 masthead-image">
                <img src="{% static 'images/mini-muffin-pizzas.jpg' %}" class="scale" alt="placeholder">
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col card mb-4  mt-3 left  top">
            <div class="card-body">
                <!-- The | safe filter is used as both these fields are written in html using Summernote -->
                <p class="card-text"><strong>Ingredients:</strong></p>
                <p>{{ recipe.ingredients | safe }}</p>
                <p><strong>Instructions:</strong></p>
                <p>{{ recipe.instructions | safe }}</p>
                
                <hr>
                <h5>Rate this Recipe</h5>
                {% if user_rating %}
                <p>Your Rating:  
                    <span class="fa fa-star {% if user_rating.rating > 0 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 1 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 2 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 3 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 4 %} checked {% endif %}"></span> 
                </p>

                <form class="hidden" id="rating-form" method="POST">
                
                    {% csrf_token %}
                    <p>How many stars would you give {{ recipe.title }}?</p>
                    <div id="rating-radio-buttons">               
                        <input type="radio" id="1-star" name="rating" value="1" checked>
                        <label for="1-star">
                            <span class="fa fa-star checked"></span>1 Star</label><br>
                
                        <input type="radio" id="2-stars" name="rating" value="2">
                        <label for="2-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>2 Stars</label><br>
                
                        <input type="radio" id="3-stars" name="rating" value="3">
                        <label for="3-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>3 Stars</label><br>
                
                        <input type="radio" id="4-stars" name="rating" value="4">
                        <label for="4-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>4 Stars</label><br>
                
                        <input type="radio" id="5-stars" name="rating" value="5">
                        <label for="5-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>5 Stars</label><br>
                    </div>
                    <button type="submit">Submit Rating</button>
                </form>

                <button id="edit-rating-btn" class="btn-edit" onclick="show_rating_form()">Edit Rating</button>
                {% else %}

                <!-- <p>Your Rating:  
                    <span class="fa fa-star {% if user_rating.rating > 0 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 1 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 2 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 3 %} checked {% endif %}"></span>
                    <span class="fa fa-star {% if user_rating.rating > 4 %} checked {% endif %}"></span> 
                </p>
                <button class="btn-edit" onclick="show_rating_form()">Edit Rating</button> -->

                <p>You haven't submitted a rating for this recipe yet.</p>
                <form id="rating-form" method="POST">
                
                    {% csrf_token %}
                    <p>How many stars would you give {{ recipe.title }}?</p>
                    <div id="rating-radio-buttons">               
                        <input type="radio" id="1-star" name="rating" value="1" checked>
                        <label for="1-star">
                            <span class="fa fa-star checked"></span>1 Star</label><br>
                
                        <input type="radio" id="2-stars" name="rating" value="2">
                        <label for="2-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>2 Stars</label><br>
                
                        <input type="radio" id="3-stars" name="rating" value="3">
                        <label for="3-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>3 Stars</label><br>
                
                        <input type="radio" id="4-stars" name="rating" value="4">
                        <label for="4-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>4 Stars</label><br>
                
                        <input type="radio" id="5-stars" name="rating" value="5">
                        <label for="5-stars">
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>
                            <span class="fa fa-star checked"></span>5 Stars</label><br>
                    </div>
                    <button type="submit">Submit Rating</button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock content %}